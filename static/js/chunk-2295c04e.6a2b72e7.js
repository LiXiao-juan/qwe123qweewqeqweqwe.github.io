(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2295c04e"],{"00df":function(t,e,a){"use strict";a("63ac")},"0384":function(t,e,a){},"0dd2":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{width:"100%",height:"100%"}},[n("el-table",{staticClass:"font table-box",staticStyle:{width:"100%"},attrs:{data:t.taskList,border:!1,"header-row-style":{background:"#f3f6fb"}}},[n("el-table-column",{staticClass:"font",attrs:{type:"index",label:"序号",width:"50%"}}),n("el-table-column",{attrs:{prop:"taskCode",label:"工单编号",width:"170%"}}),n("el-table-column",{attrs:{prop:"innerCode",label:"设备编号",width:"170%"}}),n("el-table-column",{attrs:{prop:"taskType.typeName",label:"工单类型",width:"170%"}}),n("el-table-column",{attrs:{formatter:t.createTypeFn,prop:"createType",label:"工单方式",width:"170%"}}),n("el-table-column",{attrs:{prop:"taskStatusTypeEntity.statusName",label:"工单状态",width:"170%"}}),n("el-table-column",{staticClass:"item-margin",attrs:{prop:"userName",label:"运营人员",width:"170%"}}),n("el-table-column",{attrs:{prop:"createTime",label:"创建日期",formatter:t.dateFn,width:"170%"}}),n("el-table-column",{attrs:{prop:"zip",label:"操作",width:"170%"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"watch-info",on:{click:function(a){return t.cellClick(e.row)}}},[t._v("查看详情")])]}}])})],1),n("seeInfo",{ref:"info",attrs:{isShowBtn:!1,title:"工单详情",task_item:t.row_info,allocationVisible:t.dialogInfo},on:{toIndex:t.toIndex}},[n("div",{staticClass:"info-title"},[n("div",{staticClass:"info-left"},[t._v(t._s(t.title_info))]),n("div",{staticClass:"info-right"},["取消"==t.title_info?n("img",{attrs:{src:a("aea9"),alt:""}}):n("img",{attrs:{src:a("6582"),alt:""}})])]),n("el-row",{attrs:{gutter:0}},[n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content bg-purple"},[t._v(" 设备编号："+t._s(t.row_info.innerCode)+" ")])]),n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content bg-purple-light"},[t._v(" 创建日期："+t._s(t.row_info.createTime)+" ")])]),n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content bg-purple"},[t._v(" 取消日期；"+t._s(t.row_info.updateTime)+" ")])]),n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content bg-purple-light"},[t._v(" 运营人员："+t._s(t.row_info.userName)+" ")])]),n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content bg-purple"},[t._v(" 工单类型："+t._s({1:"投放工单",2:"补货工单",3:"维修工单",4:"撤机工单"}[t.row_info.productTypeId])+" ")])]),n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content bg-purple-light"},[t._v("补货数量：")])]),n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content bg-purple"},[t._v("工单方式：{{}}")])]),n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content bg-purple-light"},[t._v(" 备注："+t._s(t.row_info.desc)+" ")])])],1)],1)],1)},r=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.allocationVisible,width:"50%",center:""},on:{close:function(e){t.$parent.dialogInfo=!1}}},[t._t("default"),a("br"),a("center",[t.isCancel?a("el-button",{attrs:{type:"info",size:"mini"},on:{click:t.confirm}},[t._v("取消工单")]):a("el-button",{attrs:{type:"info",size:"mini"},on:{click:t.createAgain}},[t._v("重新创建")])],1)],2)},i=[],o=a("f07e"),l=a("c964"),c=a("e28b"),u={components:{},data:function(){return{centerDialogVisible:!1,isCancel:!0}},created:function(){},methods:{cancel:function(){},confirm:function(){var t=this;this.$confirm("取消工单后，将不能恢复，是否确认取消","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"danger"}).then(Object(l["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["b"])({desc:"",taskId:t.task_item.taskId});case 2:t.$parent.dialogInfo=!1,t.$message({type:"success",message:"取消成功!"});case 4:case"end":return e.stop()}}),e)}))))},showCancel:function(t){this.isCancel="取消"!==t},createAgain:function(){this.$emit("toIndex")}},props:{title:{type:String,default:"提示"},allocationVisible:{type:Boolean,default:!1},task_item:{type:Object}}},p=u,d=(a("8a53"),a("0c7c")),f=Object(d["a"])(p,s,i,!1,null,"740f25ce",null),m=f.exports,b=a("9039"),h=a("5a0c"),v=a.n(h),g={components:{seeInfo:m,Dialog:b["a"]},data:function(){return{dialogInfo:!1,row_info:{},title_info:""}},props:{taskList:{type:Array,required:!0,default:function(){return[]}}},created:function(){},methods:{createTypeFn:function(t,e,a){return["自动","手动"][a]},dateFn:function(t,e,a){return v()(a).format("YYYY-MM-DD HH:mm:ss")},cellClick:function(t){this.dialogInfo=!0,console.log(t),this.$store.commit("tickets/SETTASKDETAILS",t),this.title_info=t.taskStatusTypeEntity.statusName,this.row_info=t,this.$refs.info.showCancel(t.taskStatusTypeEntity.statusName)},toIndex:function(){this.$emit("showAdd",this.row_info)}}},w=g,y=(a("ccfc"),Object(d["a"])(w,n,r,!1,null,"4741d1fd",null));e["a"]=y.exports},"2c64":function(t,e,a){"use strict";a("d1fa")},"63ac":function(t,e,a){},6582:function(t,e,a){t.exports=a.p+"static/img/success.3b5af41c.png"},"8a53":function(t,e,a){"use strict";a("0384")},9039:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.allocationVisible,width:"30%"},on:{close:function(e){t.$parent.allocation=!1}}},[t._t("default"),a("br"),t.isShowBtn?a("center",[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.$parent.allocation=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.confirm}},[t._v("确 定")])],1):t._e()],2)},r=[],s={components:{},data:function(){return{dialogVisible:!1}},props:{title:{type:String,default:"提示"},allocationVisible:{type:Boolean},isShowBtn:{type:Boolean,default:!0}},created:function(){},methods:{confirm:function(){this.$parent.allocation=!1,this.$emit("setAllocation")}}},i=s,o=a("0c7c"),l=Object(o["a"])(i,n,r,!1,null,"626a2cf2",null);e["a"]=l.exports},9503:function(t,e,a){"use strict";a("f480")},"9aac":function(t,e,a){},"9d59":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formInline}},[a("el-form-item",{attrs:{label:"工单编号:"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.formInline.taskCode,callback:function(e){t.$set(t.formInline,"taskCode",e)},expression:"formInline.taskCode"}})],1),a("el-form-item",{attrs:{label:"工单状态:"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.formInline.status,callback:function(e){t.$set(t.formInline,"status",e)},expression:"formInline.status"}},[a("el-option",{attrs:{label:"待办",value:"1"}}),a("el-option",{attrs:{label:"进行",value:"2"}}),a("el-option",{attrs:{label:"取消",value:"3"}}),a("el-option",{attrs:{label:"完成",value:"4"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:t.searchList}},[t._v("搜索")])],1)],1)],1)},r=[],s=a("f07e"),i=a("c964"),o=a("e28b"),l={name:"Search",components:{},data:function(){return{formInline:{taskCode:"",status:""}}},created:function(){},methods:{searchList:function(){var t=this;return Object(i["a"])(Object(s["a"])().mark((function e(){var a,n;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["f"])(t.formInline);case 2:a=e.sent,n=a.data,t.$emit("searchList",n.currentPageRecords,t.formInline.status);case 5:case"end":return e.stop()}}),e)})))()}}},c=l,u=(a("9503"),a("0c7c")),p=Object(u["a"])(c,n,r,!1,null,"c680e08e",null);e["a"]=p.exports},aea9:function(t,e,a){t.exports=a.p+"static/img/cancel.e8208e34.png"},ccfc:function(t,e,a){"use strict";a("9aac")},d1fa:function(t,e,a){},ed6b:function(t,e,a){"use strict";var n,r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:"新增工单",visible:t.Visible,width:"50%"},on:{close:t.close}},[a("el-form",{ref:"form",attrs:{model:t.formData,rules:t.formDataRules}},[a("el-form-item",{attrs:{label:"设备编号:","label-width":t.formLabelWidth,prop:"innerCode"}},[a("el-input",{staticStyle:{width:"70%"},attrs:{"show-word-limit":"",maxlength:"15",placeholder:"请输入",autocomplete:"off"},on:{input:t.getPeople},model:{value:t.formData.innerCode,callback:function(e){t.$set(t.formData,"innerCode",e)},expression:"formData.innerCode"}})],1),a("el-form-item",{attrs:{label:"工单类型:",prop:"productType","label-width":t.formLabelWidth}},[a("el-select",{staticStyle:{width:"70%"},attrs:{value:t.typeName,placeholder:"请选择"},model:{value:t.formData.productType,callback:function(e){t.$set(t.formData,"productType",e)},expression:"formData.productType"}},t._l(t.taskType,(function(t){return a("el-option",{key:t.typeId,attrs:{label:t.typeName,value:t.typeId}})})),1)],1),t.isRepertoire?a("el-form-item",{attrs:{label:"补货数量:","label-width":t.formLabelWidth}},[a("span",{staticClass:"Replenish",on:{click:t.toInventory}},[a("i",{staticClass:"el-icon-document"}),t._v(" 补货清单 ")])]):t._e(),a("el-form-item",{attrs:{label:"运营人员:","label-width":t.formLabelWidth,prop:"userId"}},[a("el-select",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择"},model:{value:t.formData.userId,callback:function(e){t.$set(t.formData,"userId",e)},expression:"formData.userId"}},t._l(t.people,(function(t){return a("el-option",{key:t.userId,attrs:{label:t.userName,value:t.userId}})})),1)],1),a("el-form-item",{attrs:{label:"备注:","label-width":t.formLabelWidth,prop:"desc"}},[a("el-input",{staticStyle:{width:"70%"},attrs:{size:"medium","show-word-limit":"",maxlength:"40",type:"textarea",placeholder:"请输入备注（不超过40字）"},model:{value:t.formData.desc,callback:function(e){t.$set(t.formData,"desc",e)},expression:"formData.desc"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.$parent.popup=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.postTask}},[t._v("确 定")])],1)],1),a("inventory",{attrs:{isShowInTask:t.isShowInTask,title:"补货详情"}},[a("el-table",{staticStyle:{width:"150%"},attrs:{data:t.inTaskList,stripe:"",height:"450"}},t._l(t.renderTaskData,(function(t,e){return a("el-table-column",{key:e,attrs:{prop:t.key,label:t.title,width:"180"}})})),1)],1)],1)},s=[],i=a("fc11"),o=a("f07e"),l=a("c964"),c=a("e28b"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.isShowInTask,width:"50%"},on:{close:function(e){t.$parent.isShowInTask=!1}}},[t._t("default")],2)},p=[],d={components:{},data:function(){return{}},props:{isShowInTask:{type:Boolean,default:!1},title:{type:String,default:"未知"}},created:function(){},methods:{}},f=d,m=(a("00df"),a("0c7c")),b=Object(m["a"])(f,u,p,!1,null,"d0b41462",null),h=b.exports,v=a("b775"),g=function(t){return Object(v["a"])({url:"/user-service/user/operatorList/".concat(t),method:"GET"})},w=(n={name:"addTask",components:{},data:function(){return{inTaskList:[],isShowInTask:!1,formData:{innerCode:"",createType:1,productType:"",desc:"",userId:""},renderTaskData:[{title:"货道编号",key:"channelCode"},{title:"商品名称",key:"sku.brandName"},{title:"当前数量",key:"currentCapacity"},{title:"还可添加",key:"channelCode"},{title:"铺满数量",key:"channelCode"}],typeName:"",people:[],taskList:[],taskType:[],warn:"",formDataRules:{innerCode:[{required:!0,message:"请输入设备编号",trigger:"blur"}],productType:[{required:!0,message:"请选择工单类型",trigger:"blur"}],userId:[{required:!0,message:"请选择运营人员",trigger:"blur"}],desc:[{required:!0,message:"请输入备注",trigger:"blur"}]},formLabelWidth:"200px"}}},Object(i["a"])(n,"components",{inventory:h}),Object(i["a"])(n,"props",{Visible:{type:Boolean,default:!1},isRepertoire:{type:Boolean,default:!0}}),Object(i["a"])(n,"created",(function(){this.getSupplyAlertValue()})),Object(i["a"])(n,"methods",{postTask:function(){var t=this;return Object(l["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$refs.form.validate(),e.prev=1,console.log(t.formData),e.next=5,Object(c["a"])(t.formData);case 5:t.formData={innerCode:"",productType:"",desc:"",createType:1,userId:""},e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),console.log(e.t0),t.$message.warning(e.t0.message);case 12:return e.prev=12,e.finish(12);case 14:case"end":return e.stop()}}),e,null,[[1,8,12,14]])})))()},getSupplyAlertValue:function(){var t=this;return Object(l["a"])(Object(o["a"])().mark((function e(){var a,n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["c"])();case 2:a=e.sent,n=a.data,t.warn=n;case 5:case"end":return e.stop()}}),e)})))()},getTaskType:function(){var t=this;setTimeout(Object(l["a"])(Object(o["a"])().mark((function e(){var a,n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["e"])(t.warn);case 2:a=e.sent,n=a.data,t.taskType=n;case 5:case"end":return e.stop()}}),e)}))),200)},getPeople:function(){var t=this;return Object(l["a"])(Object(o["a"])().mark((function e(){var a,n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""===t.formData.innerCode){e.next=8;break}return e.next=3,g(t.formData.innerCode);case 3:a=e.sent,n=a.data,t.people=n,e.next=9;break;case 8:return e.abrupt("return",t.$message.warning("请输入设备编号"));case 9:case"end":return e.stop()}}),e)})))()},close:function(){this.$parent.popup=!1,this.$refs.form.resetFields(),this.formData={innerCode:"",productType:"",desc:"",createType:1,userId:""}},repeatData:function(t){var e=this;setTimeout((function(){console.log(t),e.formData.innerCode=t.innerCode,e.formData.desc=t.desc,e.formData.userId=t.userId,e.getSupplyAlertValue(),e.getPeople(),e.getTaskType()}),200)},toInventory:function(){if(this.$refs.form.validateField("innerCode"),!this.people.length)return this.$message.error("无此设备编号");this.isShowInTask=!0,this.getTaskDetails()},getTaskDetails:function(){var t=this;return Object(l["a"])(Object(o["a"])().mark((function e(){var a,n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["d"])(t.formData.innerCode);case 2:a=e.sent,n=a.data,t.inTaskList=n;case 5:case"end":return e.stop()}}),e)})))()}}),n),y=w,k=(a("2c64"),Object(m["a"])(y,r,s,!1,null,"0a52a3b6",null));e["a"]=k.exports},f480:function(t,e,a){}}]);