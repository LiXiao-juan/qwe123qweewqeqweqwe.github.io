(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12bd444b"],{"14d7":function(e,t,a){"use strict";a("6871")},"1a7e":function(e,t,a){},"333d":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container"},[a("div",{staticClass:"el-pagination is-background"},[a("span",{staticClass:"el-pagination__total"},[e._v("共"+e._s(e.page.totalCount)+"条记录 第 "+e._s(e.page.pageIndex)+"/"+e._s(e.page.totalPage)+" 页")]),a("button",{class:{btnDefault:!e.upDisabled,btnDisabled:e.upDisabled},attrs:{type:"button",disabled:e.upDisabled},on:{click:e.pageUp}},[a("span",[e._v("上一页")])]),a("button",{class:{btnDefault:!e.downDisabled,btnDisabled:e.downDisabled},attrs:{type:"button",disabled:e.downDisabled},on:{click:e.pageDown}},[a("span",[e._v("下一页")])])])])},n=[],s={props:{upDisabled:{type:Boolean,default:!1},downDisabled:{type:Boolean,default:!1},page:{type:Object}},data:function(){return{}},created:function(){},methods:{pageDown:function(){this.$emit("pageDown","down")},pageUp:function(){this.$emit("pageUp","up")}}},o=s,i=(a("14d7"),a("0c7c")),l=Object(i["a"])(o,r,n,!1,null,"229e4442",null);t["a"]=l.exports},3976:function(e,t,a){"use strict";a("85a2")},"3e22":function(e,t,a){},"45d6":function(e,t,a){"use strict";a("3e22")},"4a46":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1)},n=[],s={data:function(){return{input:""}},created:function(){},methods:{}},o=s,i=(a("5b3d"),a("0c7c")),l=Object(i["a"])(o,r,n,!1,null,"72b2d66a",null);t["a"]=l.exports},"5b3d":function(e,t,a){"use strict";a("1a7e")},6842:function(e,t,a){},6871:function(e,t,a){},"6ff3":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"business-container"},[a("div",{staticClass:"business-search"},[a("span",[e._v("人员搜索:")]),a("InputField",{ref:"inputContent"}),a("CustomButton",{staticClass:"btn",attrs:{iconType:"el-icon-search"},nativeOn:{click:function(t){return e.searchFn(t)}}},[e._v("查询")])],1),a("div",{staticClass:"business-result"},[a("CustomButton",{attrs:{styles:e.newButton,iconType:"el-icon-circle-plus-outline"},on:{click:e.addInfo}},[e._v("新建")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table",staticStyle:{width:"100%","padding-left":"17px","padding-right":"17px"},attrs:{data:e.personnelListData.currentPageRecords,"cell-style":{padding:"3px 0px ",border:0},"header-cell-style":{background:"rgb(243, 246, 251)"}}},[a("el-table-column",{attrs:{label:"序号",width:"80",type:"index",index:e.table_index}}),a("el-table-column",{attrs:{prop:"userName",label:"人员名称",width:"365"}}),a("el-table-column",{attrs:{prop:"regionName",label:"归属区域",width:"365"}}),a("el-table-column",{attrs:{prop:"role.roleName",label:"角色",width:"365"}}),a("el-table-column",{attrs:{prop:"mobile",label:"联系电话",width:"365"}}),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"#5f84ff"},attrs:{type:"text",size:"medium"},on:{click:function(a){return e.editInfo(t.$index,t.row)}}},[e._v("修改")]),a("el-button",{staticStyle:{color:"#ff5a5a"},attrs:{type:"text",size:"medium"},on:{click:function(a){return e.delInfo(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e.personnelListData.totalPage>1?a("Pagination",{attrs:{page:e.personnelListData,upDisabled:e.upDisabled,downDisabled:e.downDisabled},on:{pageDown:e.getPersonnelList,pageUp:e.getPersonnelList}}):e._e(),a("FormDialog",{ref:"dialog",attrs:{roleList:e.roleList,regionList:e.regionList,title:e.title,currentId:e.currentId}})],1)},n=[],s=a("f07e"),o=a("c964"),i=a("4a46"),l=a("755d"),c=a("333d"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,width:"630px","center:false":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancel}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"userName"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(" 人员名称：")]},proxy:!0}])},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入",maxlength:"5","show-word-limit":""},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"roleId"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(" 角色：")]},proxy:!0}])},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.roleId,callback:function(t){e.$set(e.form,"roleId",t)},expression:"form.roleId"}},e._l(e.roleList,(function(e){return a("el-option",{key:e.roleCode,attrs:{label:e.roleName,value:e.roleId}})})),1)],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"mobile"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(" 联系电话：")]},proxy:!0}])},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入",maxlength:"11","show-word-limit":""},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"regionId"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(" 负责区域：")]},proxy:!0}])},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.regionId,callback:function(t){e.$set(e.form,"regionId",t)},expression:"form.regionId"}},e._l(e.regionList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id},nativeOn:{click:function(a){e.form.regionName=t.name}}})})),1)],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"image"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(" 头像：")]},proxy:!0}])},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/vm-service/sku/fileUpload","show-file-list":!1,headers:{Authorization:e.$store.state.user.token.token},"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,name:"fileName"}},[e.form.image?a("img",{staticClass:"avatar",attrs:{src:e.form.image}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),a("div",{staticClass:"el-upload__tip"},[e._v(" 支持扩展名：jpg、png，文件不得大于100kb ")])],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"status"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(" 状态：")]},proxy:!0}])},[a("el-checkbox",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[e._v("是否启用")])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onSave}},[e._v("确 定")])],1)],1)},d=[],p=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("bc95")),f={props:{roleList:{type:Array,required:!0},regionList:{type:Array,required:!0},title:{type:String},currentId:{}},data:function(){return{dialogFormVisible:!1,form:{userName:"",roleId:"",mobile:"",regionId:"",regionName:"",image:"",status:!1},formRules:{userName:[{required:!0,message:"请输入"}],roleId:[{required:!0,message:"请输入"}],mobile:[{required:!0,message:"请输入"},{pattern:/^(?:(?:\+|00)86)?1\d{10}$/,message:"请输入正确的手机号",trigger:"change"}],regionId:[{required:!0,message:"请输入"}],image:[{required:!0,message:"请上传"}]},formLabelWidth:"120px",imageFile:""}},methods:{handleAvatarSuccess:function(e,t){this.form.image=URL.createObjectURL(t.raw)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},onSave:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.form.validate();case 2:if(e.$refs.form.resetFields(),t.prev=3,"编辑人员"!==e.title){t.next=11;break}return t.next=7,Object(p["c"])(e.currentId,e.form);case 7:e.cancel(),e.$message.success("修改信息成功"),t.next=14;break;case 11:return e.cancel(),t.next=14,Object(p["a"])(e.form);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](3),console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[3,16]])})))()},cancel:function(){this.$refs.form.resetFields(),this.dialogFormVisible=!1}}},m=f,b=(a("3976"),a("0c7c")),g=Object(b["a"])(m,u,d,!1,null,"4a6e3c85",null),v=g.exports,h={components:{InputField:i["a"],CustomButton:l["a"],Pagination:c["a"],FormDialog:v},data:function(){return{loading:!1,newButton:{backgroundColor:"#ff7d33",border:"none"},personnelListData:{},params:{pageIndex:1,pageSize:10},upDisabled:!1,downDisabled:!1,pageParams:{page:1,pagesize:10},roleList:[],regionList:[],paramsRegion:{pageIndex:1,pageSize:1e5},title:"",currentId:""}},created:function(){this.getPersonnelList()},methods:{getPersonnelList:function(e){var t=this;return Object(o["a"])(Object(s["a"])().mark((function a(){var r,n,o;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,t.loading=!0,"down"!==e){a.next=10;break}return t.params.pageIndex=parseInt(t.params.pageIndex)+1,a.next=6,Object(p["e"])(t.params);case 6:r=a.sent,t.personnelListData=r.data,a.next=22;break;case 10:if("up"!==e){a.next=18;break}return t.params.pageIndex=parseInt(t.params.pageIndex)-1,a.next=14,Object(p["e"])(t.params);case 14:n=a.sent,t.personnelListData=n.data,a.next=22;break;case 18:return a.next=20,Object(p["e"])(t.params);case 20:o=a.sent,t.personnelListData=o.data;case 22:t.params.pageIndex===parseInt(t.personnelListData.totalPage)?(t.downDisabled=!0,t.upDisabled=!1):1===t.params.pageIndex?(t.downDisabled=!1,t.upDisabled=!0):(t.downDisabled=!1,t.upDisabled=!1),a.next=28;break;case 25:a.prev=25,a.t0=a["catch"](0),console.log(a.t0);case 28:return a.prev=28,t.loading=!1,a.finish(28);case 31:case"end":return a.stop()}}),a,null,[[0,25,28,31]])})))()},table_index:function(e){return e+(this.params.pageIndex-1)*this.params.pageSize+1},searchFn:function(){this.params.userName=this.$refs.inputContent.input,this.getPersonnelList(this.params)},getRoleList:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){var a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(p["g"])();case 3:a=t.sent,e.roleList=a.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getRegionList:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){var a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(p["f"])(e.paramsRegion);case 3:a=t.sent,e.regionList=a.data.currentPageRecords,console.log(e.regionList),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})))()},addInfo:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.title="新增人员",e.$nextTick((function(){e.$refs.dialog.form={userName:"",roleId:"",mobile:"",regionId:"",regionName:"",image:"",status:!1},e.$refs.dialog.$refs.form.resetFields()})),t.next=5,e.getRoleList();case 5:return t.next=7,e.getRegionList();case 7:e.$refs.dialog.dialogFormVisible=!e.$refs.dialog.dialogFormVisible,t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})))()},editInfo:function(e,t){var a=this;return Object(o["a"])(Object(s["a"])().mark((function e(){var r;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a.title="编辑人员",a.currentId=t.id,a.$nextTick((function(){a.$refs.dialog.form={userName:"",roleId:"",mobile:"",regionId:"",regionName:"",image:"",status:!1}})),e.next=6,a.getRoleList();case 6:return e.next=8,a.getRegionList();case 8:return e.next=10,Object(p["d"])(t.id);case 10:r=e.sent,a.$refs.dialog.form=r.data,a.$refs.dialog.dialogFormVisible=!a.$refs.dialog.dialogFormVisible,e.next=17;break;case 15:e.prev=15,e.t0=e["catch"](0);case 17:case"end":return e.stop()}}),e,null,[[0,15]])})))()},delInfo:function(e,t){var a=this;return Object(o["a"])(Object(s["a"])().mark((function e(){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(p["b"])(t.id);case 3:a.getPersonnelList(),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()}}},x=h,w=(a("45d6"),Object(b["a"])(x,r,n,!1,null,"389760fe",null));t["default"]=w.exports},"755d":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{staticClass:"search-btn",style:e.styles,attrs:{type:"primary",icon:e.iconType},on:{click:function(t){return e.$emit("click")}}},[e._t("default")],2)],1)},n=[],s={props:{iconType:{type:String},styles:{type:Object}},data:function(){return{}},created:function(){},methods:{}},o=s,i=(a("d4da"),a("0c7c")),l=Object(i["a"])(o,r,n,!1,null,"52890a04",null);t["a"]=l.exports},"85a2":function(e,t,a){},bc95:function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"f",(function(){return s})),a.d(t,"g",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return l})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return u}));var r=a("b775"),n=function(e){return Object(r["a"])({url:"/user-service/user/search",params:e})},s=function(e){return Object(r["a"])({url:"/vm-service/region/search",params:e})},o=function(){return Object(r["a"])({url:"/user-service/role"})},i=function(e){return Object(r["a"])({method:"POST",url:"/user-service/user",data:e})},l=function(e){return Object(r["a"])({method:"GET",url:"/user-service/user/".concat(e)})},c=function(e,t){return Object(r["a"])({method:"PUT",url:"/user-service/user/".concat(e),data:t})},u=function(e){return Object(r["a"])({method:"DELETE",url:"/user-service/user/".concat(e),data:data})}},d4da:function(e,t,a){"use strict";a("6842")}}]);