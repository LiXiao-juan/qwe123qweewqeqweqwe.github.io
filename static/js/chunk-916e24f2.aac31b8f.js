(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-916e24f2"],{"18f3":function(e,t,a){},"2ed7":function(e,t,a){"use strict";a("7d5a")},"2f94":function(e,t,a){"use strict";a.d(t,"g",(function(){return r})),a.d(t,"a",(function(){return i})),a.d(t,"e",(function(){return c})),a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"f",(function(){return u}));var n=a("b775"),r=function(e){return Object(n["a"])({url:"/vm-service/region/search",method:"GET",params:e})},i=function(e){return Object(n["a"])({url:"/vm-service/region",method:"post",data:e})},c=function(e){return Object(n["a"])({url:"/vm-service/region/".concat(e)})},s=function(e,t,a){return Object(n["a"])({url:"/vm-service/region/".concat(e),method:"PUT",data:{regionName:t,remark:a}})},o=function(e){return Object(n["a"])({url:"/vm-service/region/".concat(e),method:"DELETE"})},l=function(e,t,a){return Object(n["a"])({url:"/vm-service/node/search",params:{pageIndex:e,pageSize:t,regionId:a}})},u=function(e){return Object(n["a"])({url:"/vm-service/node/search",method:"GET",params:e})}},"373f":function(e,t,a){},"66b5":function(e,t,a){"use strict";a("9e58")},"6ad2":function(e,t,a){},"7a31":function(e,t,a){"use strict";a("daca")},"7d5a":function(e,t,a){},"8eaa":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("regionSearch",{on:{OnSearch:e.searchList}}),a("regionMain",{attrs:{regionList:e.regionData.currentPageRecords},on:{add:e.addDialog,edit:e.alterRegion,remove:e.getRegionList,check:e.checkDialog},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}}),e.regionData.totalCount?a("pagenation",{attrs:{listIsShow:this.lastDisabled&&this.rightDisabled,taskList:e.regionData,lastDisabled:e.lastDisabled,rightDisabled:e.rightDisabled},on:{lastPage:e.getLastTaskService,nextPage:e.getNextTaskService}}):e._e(),a("addRegion",{ref:"addRegion",attrs:{visible:e.addShowDialog},on:{"update:visible":function(t){e.addShowDialog=t},addSuccess:e.getRegionList}}),a("checkRegion",{attrs:{visible:e.checkShowDialog,checkList:e.checkList.currentPageRecords,checkListName:e.checkListName},on:{"update:visible":function(t){e.checkShowDialog=t}}})],1)},r=[],i=a("f07e"),c=a("c964"),s=(a("b0c0"),a("2f94")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"区域搜索:"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addressSearch,callback:function(t){e.addressSearch=t},expression:"addressSearch"}})],1),a("el-form-item",[a("el-button",{staticClass:"btnInquire",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1)],1)],1)])},l=[],u=(a("498a"),{data:function(){return{addressSearch:""}},created:function(){},methods:{onSearch:function(){this.addressSearch.trim()?(this.$emit("OnSearch",this.addressSearch.trim()),this.$message.success("查询成功")):this.$emit("OnSearch",this.addressSearch.trim())}}}),d=u,m=(a("7a31"),a("0c7c")),f=Object(m["a"])(d,o,l,!1,null,"3d983774",null),h=f.exports,p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"result"},[a("el-row",{staticClass:"operation"},[a("el-button",{staticClass:"addBtn",attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},nativeOn:{click:function(t){return e.$emit("add")}}},[e._v("新建")])],1),[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.regionList,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"name",label:"区域名称",width:"330"}}),a("el-table-column",{attrs:{prop:"nodeCount",label:"点位数",width:"330"}}),a("el-table-column",{attrs:{prop:"remark",label:"备注说明",width:"330"}}),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"el-button--text",attrs:{type:"primary"},nativeOn:{click:function(a){return e.$emit("check",t.row)}}},[e._v("查看详情")]),a("el-button",{staticClass:"el-button--text",attrs:{type:"primary"},nativeOn:{click:function(a){return e.$emit("edit",t.row)}}},[e._v("修改")]),a("el-button",{staticClass:"el-button--text",staticStyle:{color:"rgb(255, 90, 90)"},attrs:{type:"danger"},on:{click:function(a){return e.onRemove(t.row)}}},[e._v("删除")])]}}])})],1)]],2)])},b=[],g={data:function(){return{}},props:{regionList:{type:Array}},created:function(){},methods:{onRemove:function(e){var t=this;return Object(c["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$confirm("确定要删除吗","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"});case 3:return a.next=5,Object(s["c"])(e.id);case 5:t.$message.success("删除成功"),t.$emit("remove"),a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](0),t.$message.error("删除失败"),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,9]])})))()}}},v=g,k=(a("a1dd"),Object(m["a"])(v,p,b,!1,null,"0b1769ac",null)),w=k.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.listIsShow?e._e():a("div",{staticClass:"total"},[a("span",[e._v("共"+e._s(e.taskList.totalCount)+"条数据 第"+e._s(e.taskList.pageIndex)+"/ "+e._s(Math.ceil(e.taskList.totalCount/10))+"页")]),a("div",{staticClass:"page-button"},[a("MyButton",{attrs:{btnStyle:e.pageBtnStyle,disabled:e.lastDisabled},on:{click:e.lastPage}},[e._v("上一页 ")]),a("MyButton",{attrs:{btnStyle:e.pageBtnStyle,disabled:e.rightDisabled},on:{click:e.nextPage}},[e._v("下一页 ")])],1)])},D=[],O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mybutton"},[a("el-button",{class:{disabled:e.disabled},style:e.btnStyle,attrs:{disabled:e.disabled,type:"primary",icon:e.icon},on:{click:e.clickFn}},[e._t("lastIcon"),e._t("default")],2)],1)},S=[],y={name:"MyButton",data:function(){return{}},props:{icon:{type:String},btnStyle:{type:Object},disabled:{type:Boolean,default:!1}},created:function(){},methods:{clickFn:function(){this.$emit("click")}},computed:{}},j=y,_=(a("a74b"),Object(m["a"])(j,O,S,!1,null,"7cf9cebe",null)),L=_.exports,$={name:"FooterPage",data:function(){return{pageBtnStyle:{background:"#d5ddf8",width:"70px",height:"32px",color:"#000",fontWeight:"400",marginLeft:"25px"}}},props:{listIsShow:{type:Boolean},taskList:{type:Object},lastDisabled:{type:Boolean},rightDisabled:{type:Boolean}},created:function(){},methods:{lastPage:function(){this.$emit("lastPage")},nextPage:function(){this.$emit("nextPage")}},computed:{},components:{MyButton:L}},C=$,R=(a("66b5"),Object(m["a"])(C,x,D,!1,null,"548cd3e9",null)),B=R.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.visible,width:"630px","before-close":e.onClose}},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.formDataRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"区域名称:",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"15","show-word-limit":""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"备注说明:",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",maxlength:"40",autosize:{minRows:3,maxRows:4},placeholder:"请输入备注(不超过40字)","show-word-limit":""},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cancleBtn",on:{click:e.onClose}},[e._v("取 消")]),a("el-button",{staticClass:"confirmBtn",attrs:{type:"primary"},on:{click:e.onSave}},[e._v("确 定")])],1)],1)},P=[],E={data:function(){return{formData:{name:"",remark:""},formDataRules:{name:[{required:!0,message:"区域名称不能为空",trigger:"blur"}],remark:[{required:!0,message:"备注说明不能为空",trigger:"blur"}]}}},props:{visible:{type:Boolean,required:!0}},created:function(){},computed:{dialogTitle:function(){return this.formData.id?"修改区域":"新增区域"}},methods:{onClose:function(){this.$emit("update:visible",!1),this.$refs.form.resetFields(),this.formData={name:"",remark:""}},onSave:function(){var e=this;return Object(c["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.form.validate();case 2:if(!e.formData.id){t.next=10;break}return t.next=5,Object(s["d"])(e.formData.id,e.formData.name,e.formData.remark);case 5:e.$message.success("修改成功"),e.onClose(),e.$emit("addSuccess"),t.next=21;break;case 10:return t.prev=10,t.next=13,Object(s["a"])(e.formData);case 13:e.$message.success("添加成功"),e.onClose(),e.$emit("addSuccess"),t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](10),e.$message.error("添加失败");case 21:case"end":return t.stop()}}),t,null,[[10,18]])})))()},getRegionId:function(e){var t=this;return Object(c["a"])(Object(i["a"])().mark((function a(){var n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(s["e"])(e.id);case 2:n=a.sent,t.formData=n.data,console.log(n);case 5:case"end":return a.stop()}}),a)})))()}}},T=E,N=(a("e65d"),Object(m["a"])(T,I,P,!1,null,"b5cfa170",null)),M=N.exports,q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"区域详情",visible:e.visible,width:"630px","before-close":e.onClose}},[a("el-form",{attrs:{model:e.formData}},[a("el-form-item",{attrs:{label:"区域名称：","label-width":"140px"}},[a("span",[e._v(e._s(e.checkListName))])]),a("el-form-item",{attrs:{label:"包含点位：","label-width":"140px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.checkList,"highlight-current-row":"","empty-text":"暂无数据"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:"点位名称",width:"158",align:"center"}}),a("el-table-column",{attrs:{prop:"vmCount",label:"设备数量",width:"158",align:"center"}})],1)],1)],1)],1)},F=[],z={data:function(){return{formData:{}}},created:function(){},props:{visible:{type:Boolean,required:!0},checkList:{type:Array},checkListName:{type:String,required:!0}},methods:{onClose:function(){this.$emit("update:visible",!1)}}},A=z,G=(a("2ed7"),Object(m["a"])(A,q,F,!1,null,"3eb47bac",null)),J=G.exports,U={data:function(){return{regionData:{},checkList:{},checkListName:"",addShowDialog:!1,checkShowDialog:!1,loading:!1,params:{pageIndex:1,pageSize:10}}},created:function(){this.getRegionList()},components:{regionSearch:h,regionMain:w,pagenation:B,addRegion:M,checkRegion:J},computed:{lastDisabled:function(){return this.regionData.pageIndex<=1},rightDisabled:function(){return this.regionData.pageIndex==Math.ceil(this.regionData.totalCount/10)}},methods:{getRegionList:function(){var e=this;return Object(c["a"])(Object(i["a"])().mark((function t(){var a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(s["g"])(e.params);case 3:a=t.sent,e.regionData=a.data,e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},searchList:function(e){var t=this;return Object(c["a"])(Object(i["a"])().mark((function a(){var n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.params.name=e,a.next=3,Object(s["g"])(t.params);case 3:n=a.sent,t.regionData.currentPageRecords=n.data.currentPageRecords,console.log(n);case 6:case"end":return a.stop()}}),a)})))()},getNextTaskService:function(){var e=this;return Object(c["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.params.pageIndex++,e.getRegionList();case 2:case"end":return t.stop()}}),t)})))()},getLastTaskService:function(){var e=this;return Object(c["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.params.pageIndex--,e.getRegionList();case 2:case"end":return t.stop()}}),t)})))()},addDialog:function(){this.addShowDialog=!0},alterRegion:function(e){this.addShowDialog=!0,this.$refs.addRegion.getRegionId(e)},checkDialog:function(e){var t=this;return Object(c["a"])(Object(i["a"])().mark((function a(){var n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.checkShowDialog=!0,a.next=3,Object(s["b"])(1,10,e.id);case 3:n=a.sent,t.checkListName=e.name,t.checkList=n.data;case 6:case"end":return a.stop()}}),a)})))()}}},W=U,H=Object(m["a"])(W,n,r,!1,null,null,null);t["default"]=H.exports},"9e58":function(e,t,a){},a1dd:function(e,t,a){"use strict";a("6ad2")},a74b:function(e,t,a){"use strict";a("18f3")},daca:function(e,t,a){},e65d:function(e,t,a){"use strict";a("373f")}}]);